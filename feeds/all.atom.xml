<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Power Up</title><link href="http://linpower.github.io/" rel="alternate"></link><link href="http://linpower.github.io/feeds/all.atom.xml" rel="self"></link><id>http://linpower.github.io/</id><updated>2015-08-09T14:40:00+08:00</updated><entry><title>Web Crawler阅读笔记</title><link href="http://linpower.github.io/web-crawleryue-du-bi-ji.html" rel="alternate"></link><updated>2015-08-09T14:40:00+08:00</updated><author><name>power</name></author><id>tag:linpower.github.io,2015-08-09:web-crawleryue-du-bi-ji.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;看了下爬虫是怎么设计的，虽然材料有点老旧，但可以学到许多基础知识，&lt;a href="http://nlp.stanford.edu/IR-book/html/htmledition/web-crawling-and-indexes-1.html"&gt;WebCrawler&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;1 Overview&lt;/h1&gt;
&lt;p&gt;爬虫的目的：快速高效地收集尽可能多的有用的网页。&lt;/p&gt;
&lt;p&gt;必须满足的特性：鲁棒性（Robustness），可能会遇到一些页面误导爬虫陷入无限循环中（honeypot）；礼节性（Politeness），遵守一些隐含的或者明确的策略调整访问页面的速率（如robots协议）。&lt;/p&gt;
&lt;p&gt;应该满足的特性：分布式地（Distributed），可伸缩（Scalable），高效的（Performance and efficiency），保持最新（Freshness），功能易于扩展（Extensible）&lt;/p&gt;
&lt;h1&gt;2 Crawling&lt;/h1&gt;
&lt;p&gt;爬虫从一些种子集（seed set）URL开始爬取内容，将爬取的内容进行解析，抽取出文本放入文本索引器，抽取出url放入URL frontier。之后爬虫从url frontier获取一个url，继续爬取。&lt;/p&gt;
&lt;h2&gt;2.1 Architecture&lt;/h2&gt;
&lt;p&gt;&lt;img alt="basic craler architecture" src="/images/crawler_architecture.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="distributing crawler architecture" src="/images/distributing_crawler_architecture.png" /&gt;&lt;/p&gt;
&lt;h2&gt;2.2 DNS resolution&lt;/h2&gt;
&lt;p&gt;DNS解析是一个瓶颈。&lt;/p&gt;
&lt;p&gt;解决方法：缓存 -&amp;gt; 标准库中的实现通常是同步的，一个请求得等到之前请求完成了才开始执行 -&amp;gt; 实现一个异步版本&lt;/p&gt;
&lt;h2&gt;2.3 URL frontier&lt;/h2&gt;
&lt;p&gt;（1）两个重要的考虑：高质量且更新频繁的页面需要优先作为频繁爬取的对象；关于礼节性，需避免在很短的时间间隔内重复爬取一个host。&lt;/p&gt;
&lt;p&gt;（2）frontier分成两部分：&lt;/p&gt;
&lt;p&gt;&lt;img alt="frontier" src="/images/crawler_fronter.png" /&gt;&lt;/p&gt;
&lt;p&gt;（3）过程：crawler从heap中获取一个队列的可访问时间，等到该时间时，获取该队列（设为j）的头URL（设为u），获取u的内容。结束后，判断这个队列是否为空。若空，则从front queue中获取URL（设为v）来填充它。对于选择哪个front queue，是按照优先级获取的（如一个随机获取的方案，按照优先级的高低，选中的概率不同），保持优先级高的更快流向back queue。先判断back queue是否已经有v的队列，有则放入该队列，并且继续到front queues中获取下一个，直到队列j不空为止。然后更新j的时间，放入heap中。&lt;/p&gt;
&lt;h1&gt;3 Distributing indexes&lt;/h1&gt;
&lt;p&gt;两种方式：（1）根据术语（关键字？）分割，即全局索引组织。（2）根据文档分割，即本地索引组织。&lt;/p&gt;
&lt;p&gt;前者，将术语划分为各自独立的子集，每个子集存于一个节点。当查询时，把请求发给所有包含查询关键字的节点即可，最后将结果取交集。&lt;/p&gt;
&lt;p&gt;后者，将文档划分为子集，每个节点存储一个子集。当查询时，需将请求发往所有节点，最后将结果取并集。&lt;/p&gt;
&lt;h1&gt;4 Connectivity servers&lt;/h1&gt;
&lt;p&gt;建图 -&amp;gt; 邻接表 -&amp;gt; 某一行可以由它之前的7行中的一行变换得到或者直接从空行产生，用一个3bits表示选择了哪一行，然后标记元素状态（修改，删除或添加） -&amp;gt; 选择由哪一行得到，需由一个启发函数判断两者的相似度，如果超过阈值则判断为相似，可以由这一行得到 -&amp;gt; 相似度阈值太高，则会导致许多需重新生成的行，太低则会导致恢复一行的数据需要使用到太多的间接行。&lt;/p&gt;</summary><category term="python"></category><category term="Crawler"></category></entry><entry><title>Leetcode做题笔记</title><link href="http://linpower.github.io/leetcodezuo-ti-bi-ji.html" rel="alternate"></link><updated>2015-07-08T20:04:00+08:00</updated><author><name>power</name></author><id>tag:linpower.github.io,2015-07-08:leetcodezuo-ti-bi-ji.html</id><summary type="html">&lt;h2&gt;Two Sum&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;The return numbers in vector should be increasely order.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Longest Substring Without Repeating Characters&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Record the position of every characters so far.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Median of Two Sorted Arrays&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Use the method of findKth&lt;/li&gt;
&lt;li&gt;The start index should add to k&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Longest Palindromic Substring&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Use Manacher algorithm.&lt;a href="http://articles.leetcode.com/2011/11/longest-palindromic-substring-part-ii.htm"&gt;reference&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Time complexity O(N): the inner loop will take at most a total of N steps in the whole process. Why? Every step of outter loop, the mx(=id+len[id]) will be the most right index before this iteration and the inner loop will start checking charachers at position mx. Then update the mx. So the inner Loop will check every characher once.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Reverse Integer&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Use the type of &lt;code&gt;unsigned int&lt;/code&gt; to contain the &lt;code&gt;abs(x)&lt;/code&gt;, &lt;code&gt;sign&lt;/code&gt; be the sign of x.&lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;res&lt;/code&gt; to represent the reverse result so far and &lt;code&gt;res = res * 10 + digit&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;When the &lt;code&gt;res&lt;/code&gt; is bigger than 214748364 and there is digit which do not reverse yet, it will be overflow. If the reverse is overflow, the reverse of digits exclude the fast digit of x must bigger than &lt;code&gt;((2 &amp;lt;&amp;lt; 31) - 1) &amp;gt;&amp;gt; 1&lt;/code&gt;. Because if x have nine digits, then the most significant digit should be 1 or 2.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;String to Integer (atoi)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;The &lt;a href="http://www.cplusplus.com/reference/cstdlib/atoi/"&gt;atoi reference&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Use &lt;a href="http://www.cplusplus.com/reference/cctype/isspace/"&gt;&lt;code&gt;int isspace(int c)&lt;/code&gt;&lt;/a&gt; to check if character is a white-space and &lt;a href="http://www.cplusplus.com/reference/cctype/isdigit/"&gt;&lt;code&gt;bool isdigit(char)&lt;/code&gt;&lt;/a&gt; to check if character is decimal digit.&lt;/li&gt;
&lt;li&gt;And according to the problem, it requires that if the correct value is out of the range of representable values, INT_MAX (2147483647) or INT_MIN (-2147483648) is returned. But the &lt;code&gt;atoi&lt;/code&gt; in standard library does not have this requirement.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Palindrome Number&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;The negative integer is not a palindrome.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Regular Expression Matching&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;DP, O(n * m)&lt;/li&gt;
&lt;li&gt;f[i][j] = f[i-1][j-1] &amp;amp;&amp;amp; match(s[j], p[i]), if &lt;code&gt;p[i] != '*' &amp;amp;&amp;amp; p[i+1] != '*'&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;f[i][j] = f[i][j-1] || f[i-1][j-1] &amp;amp;&amp;amp; match(s[j], p[i]), if &lt;code&gt;p[i+1] == '*'&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;f[i][j] = f[i-1][j], if &lt;code&gt;p[i] == '*'&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Container With Most Water&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/lccycc/leetcode/blob/master/Container%20With%20Most%20Water.cpp"&gt;Reference lccycc&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;assume that 0..i-1 and j+1..n-1 have all find their best match&lt;/li&gt;
&lt;li&gt;assume height[i] &amp;lt; height[j]&lt;/li&gt;
&lt;li&gt;if i match some k, i&amp;lt;k&amp;lt;j&lt;/li&gt;
&lt;li&gt;answer = (k-i) * min(height[i], height[k]) &amp;lt;= (k-i) * height[i] &amp;lt; (j-i) * height[i];&lt;/li&gt;
&lt;li&gt;so the best match of i is j.  for k &amp;lt; i or k &amp;gt; j, they have find their best match. so no need to concern.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Implement strStr()&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;kmp&lt;/li&gt;
&lt;li&gt;if the needle is empty string, should return 0.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Substring with Concatenation of All Words&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;O(len * n / len * len) = O(n * len), &lt;code&gt;n&lt;/code&gt; is the length of s, &lt;code&gt;m&lt;/code&gt; is the number of words, &lt;code&gt;len&lt;/code&gt; is the length of word.&lt;/li&gt;
&lt;li&gt;The straightforward thought is that we can scan every m * len long string start form each position in s and see if all the strings in words have been appeared only once using map data structure.&lt;/li&gt;
&lt;li&gt;How to pick every m * len long string? Pick a start position in [0, len-1] and get the m * len start with it. When we have a m * len long string and the range is [i, j], then we can get another m * len long string by removing the [i, i+len-1] chars and append [j+1, j+len] chars.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Longest Valid Parentheses&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;First push -1 into stack.&lt;/li&gt;
&lt;li&gt;Then Scan the s, when the char scaned now is &lt;code&gt;(&lt;/code&gt; then push the index into stack. When the char is &lt;code&gt;)&lt;/code&gt;, pop the top element if the number of element in stack is more than one or change the top element to be the index now if the stack only contains one element, and calculate the &lt;code&gt;i - top&lt;/code&gt; which is one of the candidates of the longest length.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Multiply Strings&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Leading zero should be removed.&lt;/li&gt;
&lt;/ul&gt;</summary><category term="Leetcode"></category></entry><entry><title>Ubuntu出现相同图标</title><link href="http://linpower.github.io/ubuntuchu-xian-xiang-tong-tu-biao.html" rel="alternate"></link><updated>2015-06-09T09:39:00+08:00</updated><author><name>power</name></author><id>tag:linpower.github.io,2015-06-09:ubuntuchu-xian-xiang-tong-tu-biao.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;不知道什么时候误操作，导致dash里出现两个chrome图标：chrome图标，chrome打开新窗口图标。而且如果把第一个图标锁定到启动器，每次打开它又会产生第二个图标，神烦。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;原因&lt;/h2&gt;
&lt;p&gt;原因就是，不知道什么时候，在用户的目录下创建了一个chrome打开新窗口图标的图标，使得系统中存在两个chrome图标。&lt;/p&gt;
&lt;h2&gt;解决方法&lt;/h2&gt;
&lt;p&gt;将&lt;code&gt;~/.local/share/applications/google-chrome.desktop&lt;/code&gt;删除掉，这样就仅保留系统全局的chrome图标。&lt;/p&gt;</summary><category term="Ubuntu"></category></entry><entry><title>AspectJ学习之Introduction</title><link href="http://linpower.github.io/aspectjxue-xi-zhi-introduction.html" rel="alternate"></link><updated>2015-03-30T18:32:00+08:00</updated><author><name>power</name></author><id>tag:linpower.github.io,2015-03-30:aspectjxue-xi-zhi-introduction.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;a href="http://eclipse.org/aspectj/doc/released/progguide/index.html"&gt;The AspectJ Programming Guide&lt;/a&gt;第一章的笔记&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;1. 四个constructs：pointcuts, advice, inter-type declarations and aspects&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Pointcuts and advice dynamically affect program flow&lt;/li&gt;
&lt;li&gt;inter-type declarations statically affects a program’s class hierarchy&lt;/li&gt;
&lt;li&gt;and aspects encapsulate these new constructs.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A join point is a well-defined point in the program flow. A pointcut picks out certain join points and values at those points. A piece of advice is code that is executed when a join point is reached. These are the dynamic parts of AspectJ.（动态织入）&lt;/p&gt;
&lt;p&gt;AspectJ also has different kinds of inter-type declarations that allow the programmer to modify a program’s static structure, namely, the members of its classes and the relationship between classes.（静态织入）&lt;/p&gt;
&lt;p&gt;AspectJ’s aspect are the unit of modularity for crosscutting concerns. They behave somewhat like Java classes, but may also include pointcuts, advice and inter-type declarations.（类似于class）&lt;/p&gt;
&lt;h1&gt;2.定义pointcut点&lt;/h1&gt;
&lt;p&gt;全名：关键字call&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;call(void Point.setX(int))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;逻辑语句：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;call(void Point.setX(int)) || call(void Point.setY(int))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;别名/命名：move()代表这个pointcut&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;pointcut move():
    call(void FigureElement.setXY(int,int)) ||
    call(void Point.setX(int))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;pointcut的pointcut：关键字cflow，控制流（control-point），监测获取整个控制流&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;cflow(move())
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;3.advince：&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Before advince：在执行pointcut的方法之前执行（但在获得参数后）&lt;/li&gt;
&lt;li&gt;After advince：在执行pointcut的方法之后执行（但在return之前）&lt;/li&gt;
&lt;li&gt;Around advince：貌似是可以指定在方法运行到什么地方的时候执行该advince（on a join point runs as the join point is reached, and has explicit control over whether the program proceeds with the join point.）&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;暴露pointcut的上下文：&lt;/p&gt;
&lt;p&gt;格式如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;after(FigureElement fe, int x, int y) returning:
    ...SomePointcut... {
    ...SomeBody...
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;表示这个AfterAdvince可以获得pointcut的环境中的三个参数。使用匿名pointcut：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;after(FigureElement fe, int x, int y) returning:
    call(void FigureElement.setXY(int, int)) &amp;amp;&amp;amp; target(fe) &amp;amp;&amp;amp; args(x, y) {
    System.out.println(fe + &amp;quot; moved to (&amp;quot; + x + &amp;quot;, &amp;quot; + y + &amp;quot;)&amp;quot;);
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;使用命名的pointcut：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;pointcut setXY(FigureElement fe, int x, int y):
    call(void FigureElement.setXY(int, int)) &amp;amp;&amp;amp; target(fe) &amp;amp;&amp;amp; args(x, y);
after(FigureElement fe, int x, int y) returning: setXY(fe, x, y) {
    System.out.println(fe + &amp;quot; moved to (&amp;quot; + x + &amp;quot;, &amp;quot; + y + &amp;quot;).&amp;quot;);
}
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;4. 类型间声明(Inter-type declarations)&lt;/h1&gt;
&lt;p&gt;是切入类和它们层次结构的声明。定义一个Point类的观察者：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;aspect PointObserving {
    private Vector Point.observers = new Vector();
    ...
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;添加访问这个私有成员的方法&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;aspect PointObserving {
    private Vector Point.observers = new Vector();

    public static void addObserver(Point p, Screen s) {
        p.observers.add(s);
    }
    public static void removeObserver(Point p, Screen s) {
        p.observers.remove(s);
    }
    ...
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;添加切入点changes，以便观察变化&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;aspect PointObserving {
    private Vector Point.observers = new Vector();

    public static void addObserver(Point p, Screen s) {
        p.observers.add(s);
    }
    public static void removeObserver(Point p, Screen s) {
        p.observers.remove(s);
    }

    pointcut changes(Point p): target(p) &amp;amp;amp;&amp;amp;amp; call(void Point.set*(int));

    after(Point p): changes(p) {
        Iterator iter = p.observers.iterator();
        while ( iter.hasNext() ) {
            updateObserver(p, (Screen)iter.next());
        }
    }

    static void updateObserver(Point p, Screen s) {
        s.display(p);
    }
}
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;5. 切面（Aspect）&lt;/h1&gt;
&lt;p&gt;Aspects wrap up pointcuts, advice, and inter-type declarations in a a modular unit of crosscutting implementation. 类似一个类。&lt;/p&gt;
&lt;p&gt;不可以new出一个Aspect，默认情况它是单例的。这意味着，如果需要保持状态的话，advince可以使用一个非静态域：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;aspect Logging {
    OutputStream logStream = System.err;

    before(): move() {
        logStream.println(&amp;quot;about to move&amp;quot;);
    }
}
&lt;/pre&gt;&lt;/div&gt;</summary><category term="AspectJ"></category></entry><entry><title>误删系统文件作死</title><link href="http://linpower.github.io/wu-shan-xi-tong-wen-jian-zuo-si.html" rel="alternate"></link><updated>2015-03-12T20:25:00+08:00</updated><author><name>power</name></author><id>tag:linpower.github.io,2015-03-12:wu-shan-xi-tong-wen-jian-zuo-si.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;背景：今天网卡一直抽风，就怀疑是不是网卡驱动不稳定（因为这个网卡驱动是当时出的一个版本），就想起是不是去更新一下。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在更新无线网卡时，不慎（作死）删除了&lt;code&gt;/lib/modules/3.13.0-32-generic/kernel/drivers/misc/eeprom/eeprom_93cx6.ko&lt;/code&gt;、&lt;code&gt;/lib/modules/3.13.0-32-generic/kernel/lib/crc-ccitt.ko&lt;/code&gt;, &lt;code&gt;/lib/modules/3.13.0-32-generic/kernel/net/wireless/cfg80211.ko&lt;/code&gt;, &lt;code&gt;/lib/modules/3.13.0-32-generic/kernel/net/mac80211/mac80211.ko&lt;/code&gt;等，而且恢复不了。&lt;/p&gt;
&lt;p&gt;网上搜了一下，尝试了ubuntu重启时进入recovery模式，还是修复不了。然后以为应该是驱动被删的问题，以这个关键字搜，都是一些第三方驱动的安装之类的。后来想到应该是属于内核模块，所以尝试了下更新内核，结果如愿以偿。
看来对linux的熟悉程度还不够，一个问题还要绕好久。&lt;/p&gt;
&lt;p&gt;相关命令：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;apt-get install linux-image&lt;/code&gt;&lt;/p&gt;</summary><category term="Ubuntu"></category></entry><entry><title>在django中使用ImageField将图片存储在bcs中</title><link href="http://linpower.github.io/zai-djangozhong-shi-yong-imagefieldjiang-tu-pian-cun-chu-zai-bcszhong.html" rel="alternate"></link><updated>2014-12-05T21:22:00+08:00</updated><author><name>power</name></author><id>tag:linpower.github.io,2014-12-05:zai-djangozhong-shi-yong-imagefieldjiang-tu-pian-cun-chu-zai-bcszhong.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;因为像bae一类的paas平台，一般都是需要将除了代码外的文件存储到其他专门的服务中。为了使本博能上传图片，就使用了bcs，在django中，ImageField默认时存储到磁盘中，为了能上传到云上，需要自己定制storage。&lt;/p&gt;
&lt;p&gt;参考&lt;a href="http://yuanxiao.sinaapp.com/pages/122/126/310/article_index.html"&gt;python-django如何在sae中使用自带imagefield和filefield&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;定制Storage&lt;/h1&gt;
&lt;p&gt;bcs的API使用官网提供的封装好的pybcs，其他就是继承并重载FileSystemStorage。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#-*- coding: UTF-8 -*-&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.core.files.storage&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;FileSystemStorage&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.core.exceptions&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;SuspiciousOperation&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pybcs&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;logging&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;uuid&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;

&lt;span class="n"&gt;pybcs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;init_logging&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INFO&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;AK&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;your AK&lt;/span&gt;
&lt;span class="n"&gt;SK&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;your SK&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;BUCKET&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;your bucket&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;bcs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pybcs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BCS&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;http://bcs.duapp.com/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;AK&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;SK&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pybcs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;HttplibHTTPC&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;bckt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bcs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bucket&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BUCKET&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;BcsStorage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FileSystemStorage&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;location&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;base_url&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="nb"&gt;super&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BcsStorage&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;location&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;base_url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="nd"&gt;@property&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;maxSize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot; max file size 2G &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;1024&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;1024&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;1024&lt;/span&gt;

    &lt;span class="nd"&gt;@property&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fileTypes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot; the file types allowed &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;*&amp;#39;&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;makename&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;oname&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;basename&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dirname&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;fname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hk&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;oname&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;Except&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;fname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hk&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;oname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;hk&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;rname&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;_&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;.&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;uuid&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;uuid4&lt;/span&gt;&lt;span class="p"&gt;()),&lt;/span&gt; &lt;span class="n"&gt;fname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hk&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;rname&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;_&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;uuid&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;uuid4&lt;/span&gt;&lt;span class="p"&gt;()),&lt;/span&gt; &lt;span class="n"&gt;fname&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;rname&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;_save&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;hz&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fileTypes&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;*&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;hz&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lower&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fileTypes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s"&gt;u&amp;quot;不支持的文件类型&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;，仅支持&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hz&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fileTypes&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;SuspiciousOperation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;u&amp;quot;不支持的文件类型&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;，仅支持&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hz&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fileTypes&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
        &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;makename&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;maxSize&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;SuspiciousOperation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;u&amp;quot;文件大小超过限制&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c"&gt;# object name must start with &amp;#39;/&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;startswith&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bckt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;object&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bckt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;object&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c"&gt;#let the object can be read by public&lt;/span&gt;
        &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;make_public&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="c"&gt;# object name must start with &amp;#39;/&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;startswith&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bckt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;object&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bckt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;object&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ImageStorage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BcsStorage&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="nd"&gt;@property&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fileTypes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;jpg&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;jpeg&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;png&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;gif&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;修改pybcs&lt;/h1&gt;
&lt;p&gt;印象中应该只有一处有错，在&lt;code&gt;common.py&lt;/code&gt;中需要修改shorten函数：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def shorten(s, l=80):
    if len(s)&amp;lt;=l:
        return s
    if hasattr(s, &amp;#39;__getitem__&amp;#39;):
        return s[:l-3] + &amp;#39;...&amp;#39;
    else:
        return &amp;#39;data...&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;使用方法&lt;/h1&gt;
&lt;p&gt;在定义model时，使用ImageField，并带上参数&lt;code&gt;storage=ImageStorage()&lt;/code&gt;。同时需要重载delete，否则不会删除图片。&lt;/p&gt;
&lt;p&gt;class PaperImage(models.Model):
    image = models.ImageField(verbose_name=ugettext(u'图片'), max_length=250,
        upload_to=UPLOAD_TO, storage=ImageStorage(), null=True, blank=True)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;def __unicode__(self):
    return u&amp;quot;%s&amp;quot; % self.image

def delete(self, using=None):
    try:
        self.image.storage.delete(self.image.name)
    except Exception, e:
        print e
        pass
    super(PaperImage, self).delete(using=None)
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;修改require,txt&lt;/h1&gt;
&lt;p&gt;我使用的bae，环境中缺少PIL包，在require.txt添加一行，写上&lt;code&gt;PIL&lt;/code&gt;&lt;/p&gt;</summary><category term="BAE"></category><category term="BCS"></category><category term="django"></category></entry><entry><title>Ubuntu14.04安装MT7630E网卡</title><link href="http://linpower.github.io/ubuntu1404an-zhuang-mt7630ewang-qia.html" rel="alternate"></link><updated>2014-12-05T15:44:00+08:00</updated><author><name>power</name></author><id>tag:linpower.github.io,2014-12-05:ubuntu1404an-zhuang-mt7630ewang-qia.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;去年买的HP probook g440，网卡太奇怪，竟然linux低版本的内核不支持，今天发现在3.13~3.14版本支持了，所以整了个ubuntu14.04&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;安装MT7630E驱动&lt;/h1&gt;
&lt;p&gt;下载MT7630E_Wi-Fi_BT_Source_V3.14_20140625_v2.tar.gz，解压，按照readme说明安装&lt;/p&gt;
&lt;h1&gt;开机自动加载&lt;/h1&gt;
&lt;p&gt;很奇怪，重启后重视不能自动加载驱动，找了好久，终于发现将编译出来的文件：&lt;code&gt;rt2x00lib.ko&lt;/code&gt;,&lt;code&gt;rt2x00pci.ko&lt;/code&gt;,&lt;code&gt;rt2x00mmio.ko&lt;/code&gt;,&lt;code&gt;rt2800lib.ko&lt;/code&gt;,&lt;code&gt;rt2800pci.ko&lt;/code&gt;复制到&lt;code&gt;/lib/modules/$(uname -r)/kernel/net/rt2x00/&lt;/code&gt;中，并运行命令&lt;code&gt;cd /lib/modules/$(uname -r)/;sudo depmod -a;&lt;/code&gt;即可&lt;/p&gt;</summary><category term="Ubuntu"></category></entry><entry><title>bae上部署django的notes</title><link href="http://linpower.github.io/baeshang-bu-shu-djangode-notes.html" rel="alternate"></link><updated>2014-11-21T22:51:00+08:00</updated><author><name>power</name></author><id>tag:linpower.github.io,2014-11-21:baeshang-bu-shu-djangode-notes.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;这个网站就部署在bae上的，正好自己在学python，所以就学了下使用django弄个网页。
本来很早就想写部署notes，因为官方的部署很不全，自己遇到好多坑，现在把还记得的重要过程记录一下。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这里的说明先假设在项目的根目录下创建创建了一个django的项目，名为blog，所有他的文件也就包含在/blog下面。&lt;/p&gt;
&lt;h1&gt;修改index.py&lt;/h1&gt;
&lt;p&gt;需要把项目的setting放入&lt;code&gt;DJANGO_SETTINGS_MODULE&lt;/code&gt;变量中。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#-*- coding:utf-8 -*-&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.core.handlers.wsgi&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;WSGIHandler&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;bae.core.wsgi&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;WSGIApplication&lt;/span&gt;
&lt;span class="c"&gt;# settings放入变量中&lt;/span&gt;
&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;DJANGO_SETTINGS_MODULE&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;blog.settings&amp;#39;&lt;/span&gt;
&lt;span class="c"&gt;#将项目目录加入到path中&lt;/span&gt;
&lt;span class="n"&gt;path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dirname&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;abspath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;__file__&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;blog&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;修改app.conf&lt;/h1&gt;
&lt;p&gt;app.conf主要是用来控制后端WEB server的处理逻辑的，可以参考&lt;a href="http://godbae.duapp.com/?p=44#comment-12"&gt;bae技术博客&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;它可以直接处理静态请求，然后把动态请求都转发给后端的webServer。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;handlers:
  # 静态请求直接返回静态资源
  - url : /static/(.*)
    script : /blog/blog/static/$1
  # 动态请求转发给index.py
  - url : /.*
    script: index.py

  - expire : .jpg modify 10 years
  - expire : .swf modify 10 years
  - expire : .png modify 10 years
  - expire : .gif modify 10 years
  - expire : .JPG modify 10 years
  - expire : .ico modify 10 years
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;数据库连接&lt;/h1&gt;
&lt;p&gt;使用数据库以及django自带的管理模块&lt;code&gt;admin&lt;/code&gt;，需要将python目录下的&lt;code&gt;/Lib/site-packages/django/contrib/admin&lt;/code&gt;文件夹拷贝到上面设置的静态文件路径下&lt;code&gt;/blog/blog/static/&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;settings.py&lt;/code&gt;需要修改下数据库连接设置：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;DATABASES = {
    &amp;#39;default&amp;#39;: {
        &amp;#39;ENGINE&amp;#39;: &amp;#39;django.db.backends.mysql&amp;#39;,
        &amp;#39;NAME&amp;#39;: &amp;#39;DBNAME&amp;#39;, 
        &amp;#39;USER&amp;#39;: &amp;#39;USERID&amp;#39;,
        &amp;#39;PASSWORD&amp;#39;: &amp;#39;PWD&amp;#39;,
        &amp;#39;HOST&amp;#39;: &amp;#39;sqld.duapp.com&amp;#39;, 
        &amp;#39;PORT&amp;#39;: &amp;#39;4050&amp;#39;, 
    }
}
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;本地运行与上线发布&lt;/h1&gt;
&lt;p&gt;上线发布需要把&lt;code&gt;settings.py&lt;/code&gt;设置为生成模式，&lt;code&gt;debug=False&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;因为装bae的本地开发环境比较麻烦，所以我在本地运行时，都是直接用runserver方式开启调试模式的，这时就需要设置静态文件的目录，以便获取静态文件&lt;/p&gt;
&lt;p&gt;&lt;code&gt;settings.py&lt;/code&gt;修改设置：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;......&lt;/span&gt;
&lt;span class="n"&gt;DEBUG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;
&lt;span class="o"&gt;......&lt;/span&gt;
&lt;span class="n"&gt;STATIC_ROOT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PROJECT_DIR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;static&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;STATIC_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;/static/&amp;#39;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="n"&gt;STATICFILES_DIRS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;css&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;STATIC_ROOT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;css&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;img&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;STATIC_ROOT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;img&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;js&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;STATIC_ROOT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;js&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="BAE"></category><category term="django"></category></entry><entry><title>sublime配置及使用</title><link href="http://linpower.github.io/sublimepei-zhi-ji-shi-yong.html" rel="alternate"></link><updated>2014-11-11T10:19:00+08:00</updated><author><name>power</name></author><id>tag:linpower.github.io,2014-11-11:sublimepei-zhi-ji-shi-yong.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;之前一直使用超哥推荐的Notepad++，在windows还是挺顺手的，后来黎大神推荐了sublime，界面酷炫，可以DIY各种功能，跨平台，简直甩前者N条街。但不能文件关联也有一些不便，所以目前是notepad++当记事本用，sublime写点小程序用。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;sublime设置及使用&lt;/h1&gt;
&lt;p&gt;推荐&lt;a href="http://zh.lucida.me/blog/sublime-text-complete-guide/"&gt;Sublime Text 全程指南&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;编译&amp;amp;运行C++&lt;/h1&gt;
&lt;p&gt;默认的设置能编译但运行不了C++程序，把&lt;code&gt;Packages/C++/C++.sublime-build&lt;/code&gt;修改为：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;{
    &amp;quot;cmd&amp;quot;: [&amp;quot;g++&amp;quot;, &amp;quot;-std=c++11&amp;quot;, &amp;quot;-Wall&amp;quot;, &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;, &amp;quot;-o&amp;quot;, &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;file_base_name&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;],
    &amp;quot;file_regex&amp;quot;: &amp;quot;^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$&amp;quot;,
    &amp;quot;working_dir&amp;quot;: &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;,
    &amp;quot;selector&amp;quot;: &amp;quot;source.c, source.c++&amp;quot;,

    &amp;quot;variants&amp;quot;:
    [
        {
            &amp;quot;name&amp;quot;: &amp;quot;Run&amp;quot;,
            &amp;quot;shell&amp;quot;: true,
            &amp;quot;cmd&amp;quot;: [&amp;quot;start&amp;quot;, &amp;quot;cmd&amp;quot;, &amp;quot;/c&amp;quot;, &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;file_base_name&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; &lt;span class="err"&gt;&amp;amp;&amp;amp;&lt;/span&gt; pause&amp;quot;]
        }
    ]
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这样就可以在命令行中运行程序输入数据。&lt;/p&gt;
&lt;h1&gt;个人习惯配置&lt;/h1&gt;
&lt;p&gt;可以参考之前提到的那篇文章，这里记录下自己的设置&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;{
            // 使光标闪动更加柔和
    &amp;quot;caret_style&amp;quot;: &amp;quot;phase&amp;quot;,
            // 显示空白字符
    &amp;quot;draw_white_space&amp;quot;: &amp;quot;all&amp;quot;,
            // 保存时自动增加文件末尾换行
    &amp;quot;ensure_newline_at_eof_on_save&amp;quot;: true,
            // 字体大小
    &amp;quot;font_size&amp;quot;: 16.0,
            // 高亮当前行
    &amp;quot;highlight_line&amp;quot;: true,
            // 高亮修改过的标签
    &amp;quot;highlight_modified_tabs&amp;quot;: true,
    &amp;quot;ignored_packages&amp;quot;:
    [
        &amp;quot;Vintage&amp;quot;
    ],
            // 添加标尺
    &amp;quot;rulers&amp;quot;:
    [
        80,
        100
    ],
            // tab大小设置为4
    &amp;quot;tab_size&amp;quot;: 4,
    &amp;quot;theme&amp;quot;: &amp;quot;Soda Dark.sublime-theme&amp;quot;,
            // 使用空格代替tab
    &amp;quot;translate_tabs_to_spaces&amp;quot;: true,
            // 保存时去除末尾空白字符
    &amp;quot;trim_trailing_white_space_on_save&amp;quot;: true
}
&lt;/pre&gt;&lt;/div&gt;</summary><category term="sublime"></category></entry><entry><title>gcj2013 B题 Manage your Energy</title><link href="http://linpower.github.io/gcj2013-bti-manage-your-energy.html" rel="alternate"></link><updated>2014-11-07T22:40:00+08:00</updated><author><name>power</name></author><id>tag:linpower.github.io,2014-11-07:gcj2013-bti-manage-your-energy.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;最近刷codejam的略感无力，本来以为今天刷gcj2013 round1A应该能轻松耍一下。。但是被第二题卡住，看来最近确实脑残了......&lt;/p&gt;
&lt;p&gt;这里仅仅记录下脑残的思路是如何产生，以便日后回想自己的too young too naive的时光。。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;NC One&lt;/h1&gt;
&lt;p&gt;看完题目第一感觉，找出最大的Vmax然后把所有e * Vmax，其他求和 * r。但总有种不可能这么简单的感觉，但还是先写出来试试。果然码完就觉得有问题。&lt;/p&gt;
&lt;h1&gt;NC Two&lt;/h1&gt;
&lt;p&gt;反省第一版的问题后，发现在最大的值所在位置之后的一段v里需要再另外找最大值。于是求f[i]，表示i点及其后的最大值，接着从前往后扫一遍，尽量将e用在f[i]==v[i]的点上。然后就以为已经解决了。。&lt;/p&gt;
&lt;h1&gt;正解&lt;/h1&gt;
&lt;p&gt;最后还是没找出问题所在，时间不多（还有许多砖要搬），就直接看&lt;a href="https://code.google.com/codejam/contest/2418487/dashboard#s=a&amp;amp;a=1"&gt;题解&lt;/a&gt;了。。&lt;/p&gt;
&lt;p&gt;对于每一个i，需要找出下一个比i大的位置j，那么肯定应该尽量把e用于j位置。。至于快速找出i的下一个比i大的位置，需要用到单调栈。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include &amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;lt;cstring&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;lt;cstdio&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;lt;algorithm&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;lt;stack&amp;gt;&lt;/span&gt;
&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;LL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10004&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;nxt&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10004&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;scanf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;cas&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;cas&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;cas&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;scanf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%d%d%d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;scanf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;empty&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;top&lt;/span&gt;&lt;span class="p"&gt;()])&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;nxt&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;top&lt;/span&gt;&lt;span class="p"&gt;()]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
                &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;empty&lt;/span&gt;&lt;span class="p"&gt;()){&lt;/span&gt;
            &lt;span class="n"&gt;nxt&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;top&lt;/span&gt;&lt;span class="p"&gt;()]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;LL&lt;/span&gt; &lt;span class="n"&gt;ans&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;now&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nxt&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nxt&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;ans&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;now&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
                &lt;span class="n"&gt;now&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;nxt&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;now&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;ans&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;nxt&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;now&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
                &lt;span class="n"&gt;now&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nxt&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="n"&gt;now&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;now&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Case #%d: %lld&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cas&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ans&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="GCJ"></category></entry><entry><title>Win7下配置sublime2和MinGW用于编译C++</title><link href="http://linpower.github.io/win7xia-pei-zhi-sublime2he-mingwyong-yu-bian-yi-c.html" rel="alternate"></link><updated>2014-11-04T18:11:00+08:00</updated><author><name>power</name></author><id>tag:linpower.github.io,2014-11-04:win7xia-pei-zhi-sublime2he-mingwyong-yu-bian-yi-c.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;在windows下使用sublime2时，有一个很不方便的地方，运行c++时不能使用命令行输入数据，这给调试小程序带来了麻烦，尝试了一下各种方法终于搞定。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;sublime2和MinGW的安装配置不提及，网上资料非常多。&lt;/p&gt;
&lt;p&gt;最重要的的是修改&lt;code&gt;C++.sublime-build&lt;/code&gt;文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;{
    &amp;quot;cmd&amp;quot;: [&amp;quot;g++&amp;quot;, &amp;quot;-std=c++11&amp;quot;, &amp;quot;-Wall&amp;quot;, &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;, &amp;quot;-o&amp;quot;, &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;file_base_name&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;],
    &amp;quot;file_regex&amp;quot;: &amp;quot;^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$&amp;quot;,
    &amp;quot;working_dir&amp;quot;: &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;,
    &amp;quot;selector&amp;quot;: &amp;quot;source.c, source.c++&amp;quot;,

    &amp;quot;variants&amp;quot;:
    [
        {
            &amp;quot;name&amp;quot;: &amp;quot;Run&amp;quot;,
            &amp;quot;shell&amp;quot;: true,
            &amp;quot;cmd&amp;quot;: [&amp;quot;start&amp;quot;, &amp;quot;cmd&amp;quot;, &amp;quot;/c&amp;quot;, &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;file_base_name&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; &lt;span class="err"&gt;&amp;amp;&amp;amp;&lt;/span&gt; pause&amp;quot;]
        }
    ]
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;如果运行不了，可以按快捷键&lt;code&gt;Ctrl + `&lt;/code&gt;调出sublime的控制台查看错误信息。&lt;/p&gt;
&lt;p&gt;如果是因为文件名带有中文导致编码错误，可以在&lt;code&gt;sublime_plugin.py&lt;/code&gt;中添加：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;reload(sys)
sys.setdefaultencoding(&amp;#39;utf-8&amp;#39;)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;但是中文路径名始终没找到解决办法。&lt;/p&gt;
&lt;hr /&gt;</summary><category term="sublime"></category></entry></feed>